{% extends "base.html" %}
{% load static %}

{% block meta %}
    <meta name="description" content="{{ plan.name }} - {{ plan.description }}">
    <meta name="keywords" content="fitness subscription, {{ plan.name }}, workout plans, training programs">
    <meta property="og:title" content="{{ plan.name }} - Fitness Subscription Plan">
    <meta property="og:description" content="{{ plan.description }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:image" content="{% static 'images/logo.png' %}">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6">
            <div class="custom-card">
                <div class="card-body">
                    <h1 class="h2 text-gradient mb-4">{{ plan.name }}</h1>
                    <div class="mb-4">
                        <span class="display-4 text-gradient">${{ plan.price }}</span>
                        <span class="text-muted">/{{ plan.plan_type }}</span>
                    </div>
                    <p class="lead">{{ plan.description }}</p>
                    
                    <h3 class="h4 mt-4 mb-3">Plan Features</h3>
                    <ul class="list-unstyled">
                        {% for feature in plan.features.splitlines %}
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            {{ feature }}
                        </li>
                        {% endfor %}
                    </ul>

                    {% if user.is_authenticated %}
                        {% if user_subscription and user_subscription.plan == plan %}
                            <div class="alert alert-success mt-4">
                                <i class="fas fa-check-circle me-2"></i>
                                You are currently subscribed to this plan
                            </div>
                        {% else %}
                            <a href="{% url 'products:subscribe' plan.id %}" 
                               class="custom-btn custom-btn-primary w-100 mt-4"
                               aria-label="Subscribe to {{ plan.name }} plan">
                                Subscribe Now
                            </a>
                        {% endif %}
                    {% else %}
                        <div class="alert alert-info mt-4">
                            <i class="fas fa-info-circle me-2"></i>
                            Please <a href="{% url 'account_login' %}">login</a> to subscribe to this plan
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="custom-card">
                <div class="card-body">
                    <h3 class="h4 mb-4">What's Included</h3>
                    <div class="row">
                        <div class="col-6 mb-4">
                            <i class="fas fa-dumbbell fa-2x text-gradient mb-3"></i>
                            <h5>Workout Plans</h5>
                            <p>Access to {{ plan.workout_count }} workout plans</p>
                        </div>
                        <div class="col-6 mb-4">
                            <i class="fas fa-utensils fa-2x text-gradient mb-3"></i>
                            <h5>Nutrition Guides</h5>
                            <p>Comprehensive nutrition guides and meal plans</p>
                        </div>
                        <div class="col-6 mb-4">
                            <i class="fas fa-video fa-2x text-gradient mb-3"></i>
                            <h5>Video Content</h5>
                            <p>Exclusive workout and tutorial videos</p>
                        </div>
                        <div class="col-6 mb-4">
                            <i class="fas fa-comments fa-2x text-gradient mb-3"></i>
                            <h5>Community Access</h5>
                            <p>Join our supportive fitness community</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="custom-card mt-4">
                <div class="card-body">
                    <h3 class="h4 mb-4">Frequently Asked Questions</h3>
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h4 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    How do I cancel my subscription?
                                </button>
                            </h4>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    You can cancel your subscription at any time through your account settings. Your access will continue until the end of your current billing period.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h4 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    Can I upgrade or downgrade my plan?
                                </button>
                            </h4>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Yes, you can change your plan at any time. The changes will take effect at the start of your next billing cycle.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 